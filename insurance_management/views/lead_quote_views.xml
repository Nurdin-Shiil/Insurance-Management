<odoo>
    <record id="lead_quote_view_list" model="ir.ui.view">
        <field name="name">lead.quote.list</field>
        <field name="model">lead.quote</field>
        <field name="arch" type="xml">
            <list>
                <field name="lead_id" />
                <field name="partner_id" />
                <field name="premium_amount" />
                <field name="submission_date" />
                <field name="state" widget="badge" />
            </list>
        </field>
    </record>

    <record id="lead_quote_view_form" model="ir.ui.view">
        <field name="name">lead.quote.form</field>
        <field name="model">lead.quote</field>
        <field name="arch" type="xml">
            <form>
                <header class="oe_button_box" name="button_box">
                    <button name="action_confirm" type="object" string="Confirm"
                        class="oe_stat_button" icon="fa-check"
                        invisible="state in ['confirmed', 'rejected']" />
                    <button name="action_negotiate" type="object" string="Negotiate"
                        class="oe_stat_button" icon="fa-comments" invisible="state != 'submitted'" />
                    <button name="action_reject" type="object" string="Reject"
                        class="oe_stat_button" icon="fa-times"
                        invisible="state in ['confirmed', 'rejected']" />
                </header>
                <sheet>
                    <group>
                        <field name="lead_id" options="{'no_create': True}" />
                        <field name="partner_id" options="{'no_create': True}"
                            domain="[('is_insurer', '=', True)]" />
                        <field name="state" widget="badge" />
                    </group>
                    <group>
                        <field name="quote_document" widget="binary"
                            filename="quote_document_filename" />
                        <field name="quote_document_filename" invisible="1" />
                        <field name="premium_amount" />
                        <field name="coverage_terms" widget="text" />
                        <field name="submission_date" />
                    </group>
                    <group>
                        <field name="comments" widget="text" />
                    </group>
                    <notebook>
                        <page string="Messages">
                            <field name="message_ids" widget="mail_thread" />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="lead_quote_view_search" model="ir.ui.view">
        <field name="name">lead.quote.search</field>
        <field name="model">lead.quote</field>
        <field name="arch" type="xml">
            <search>
                <field name="lead_id" />
                <field name="partner_id" />
                <field name="state" />
                <filter string="Submitted" name="submitted" domain="[('state', '=', 'submitted')]" />
                <group expand="0" string="Group By">
                    <filter name="lead" string="Lead" context="{'group_by': 'lead_id'}" />
                    <filter name="underwriter" string="Underwriter"
                        context="{'group_by': 'partner_id'}" />
                    <filter name="state" string="Status" context="{'group_by': 'state'}" />
                </group>
            </search>
        </field>
    </record>

    <record id="action_lead_quote" model="ir.actions.act_window">
        <field name="name">Quotes</field>
        <field name="res_model">lead.quote</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="lead_quote_view_list" />
        <field name="search_view_id" ref="lead_quote_view_search" />
    </record>

    <menuitem
        id="menu_lead_quote"
        name="Quotes"
        action="action_lead_quote"
        parent="crm.crm_menu_sales"
        sequence="2" />
</odoo>